# 按量付费实例停机不收费 {#concept_js1_1fd_5db .concept}

## 定义 {#section_kvc_4qk_zdb .section}

**实例停机不收费** 是指通过 控制台、StopInstance 接口或者 阿里云CLI 使按量付费的VPC类型ECS实例进入 **已停止**（`Stopped`）状态后，该实例的计算资源（即vCPU和内存）不再产生费用。

## 适用资源 {#section_lvc_4qk_zdb .section}

**实例停机不收费** 功能 **仅适用于** 按量付费的VPC类型ECS实例（仅限于vCPU和内存）。

**实例停机不收费** 功能 **不适用** 于以下资源：

-   所有本地盘实例，包括但不限于d1、d1ne、ga1、gn5、i1和i2。

-   挂载在实例上的云盘（包括数据盘和系统盘）、公网带宽、弹性公网（EIP）地址、镜像：开启 **实例停机不收费** 功能，实例进入 **停机不收费** 模式后，这些资源继续计费。费用说明，请参见 按量付费、云盘收费标准、公网带宽计费、带宽收费标准 和 EIP收费标准。

-   使用 控制台 或 CreateInstance 接口创建按量付费的VPC类型ECS实例后，第一次启动时从 **已停止**（`Stopped`）状态进入 **已运行**（`Running`）状态这段时间的实例。

-   因欠费导致停机的实例：实例及关联资源在欠费停机后，也会停止计费，计算资源和公网 IP 也将会被释放。重开机 后，所有资源继续收费。

-   经典网络下的ECS按量付费实例：进入 **已停止** 状态后，阿里云仍然对实例及关联资源收费，重新启动时公网IP地址和私网IP地址保持不变。


## 影响 {#section_qvc_4qk_zdb .section}

实例停止并进入 **停机不收费** 模式后，会产生以下影响：

-   实例的CPU和内存将不再保留，所以再次启动实例时可能会失败。此时，您可以尝试再次启动，或者换一个时间再次启动。

-   如果实例分配了公网IP地址，那么IP地址会自动释放。通过 控制台 或 StartInstance 启动实例后，实例会被分配一个新的公网IP地址。但是，私网IP地址不受影响，保留不变。

    **说明：** 如果您不希望公网IP地址发生变化，可以 将公网IP地址转为EIP地址 后再停止实例。

-   t5实例停止前累积的CPU积分仍然有效，但是停止后不再累积CPU积分。实例启动后会继续累积CPU积分。详细信息，请参见 [突发性能实例](../../../../intl.zh-CN/产品简介/实例/突发性能实例.md#)。


更换系统盘（ReplaceSystemDisk）、回滚磁盘（ResetDisk）、重新初始化磁盘（ReInitDisk）或执行其他运维操作时，您需要停止实例，并且需要在短时间内重新启动实例，为了保证实例能及时成功启动并投入生产使用，建议您执行以下任一种操作：

-   登录 [ECS管理控制台](https://ecs.console.aliyun.com/#/home)，关闭 **默认VPC内实例停机不收费**。具体操作，请参见 [关闭功能](#disable)。

-   通过API或者CLI中操作时，在 StopInstance 中设置 `StoppedMode = KeepCharging`。


## 开启功能 {#default .section}

您必须手动开启 **默认VPC内实例停机不收费** 才能使用 **实例停机不收费** 功能。

**默认VPC内实例停机不收费** 开启后，默认您账号下所有地域里按量付费的VPC类型ECS实例都能使用 **实例停机不收费** 功能。但是，停止实例时，您可以选择是否 **停止后仍旧保留实例并继续收费**。

**说明：** 如果您已经在使用按量付费的VPC类型ECS实例，为了防止意外影响您的系统和应用，您账号下ECS服务不会默认开启 **实例停机不收费** 功能。在充分理解并确定这个功能不会对您的系统和应用造成不可控制的影响后，您可以登录ECS管理控制台开启。

按以下步骤开启 **默认VPC内实例停机不收费**：

1.  登录 [ECS管理控制台](https://ecs.console.aliyun.com/#/home)。
2.  在左侧导航栏中，单击 **概览**。
3.  在 **常用操作** 区域，单击 **设置**。
4.  开启 **默认VPC内实例停机不收费**，确认弹出的警告信息，并打开 **默认VPC内实例停机不收费**。
5.  单击 **确定**。

启用 **默认VPC内实例停机不收费** 后，您可以关闭该设置。具体操作，请参见 [关闭功能](#disable)。

## 关闭功能 {#disable .section}

您可以关闭 **实例停机不收费** 功能。

**说明：** 该操作对您账号下所有地域里按量付费的VPC类型ECS实例有效。请谨慎操作。

关闭 **实例停机不收费** 功能后：

-   您账号下所有地域里按量付费的VPC类型ECS实例停止后都会继续收费。

-   当前处于 **已停止**（`Stopped`）状态的实例，如果 **停止模式** 是 **停机不收费** 仍然不收取费用。重新启动后：

    -   如果实例原来分配了公网IP地址，会被分配一个新的公网IP地址。
    -   如果实例原来绑定了EIP地址，那么EIP地址保持不变。
-   实例下一次进入**已停止**（`Stopped`）状态时：

    -   实例会继续计费。
    -   如果实例分配了公网IP地址，那么该IP地址被保留，不受影响。

按以下步骤关闭 **实例停机不收费** 功能：

1.  登录 [ECS管理控制台](https://ecs.console.aliyun.com/#/home)。
2.  在左侧导航栏中，单击 **概览**。
3.  在 **常用操作** 区域，单击 **设置**。
4.  关闭 **默认VPC内实例停机不收费**，确认弹出的警告信息，并单击 **我同意并确定**。
5.  单击 **确定**。

