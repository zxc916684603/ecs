# 步骤 2：创建ECS实例 {#task_zjx_p1f_5db .task}

本文只介绍如何创建一个实例。如果您想用自己的系统盘快照创建自定义镜像，并用这个自定义镜像创建实例，请参见文档：[使用自定义镜像创建实例](../../../../cn.zh-CN/用户指南/实例/创建实例/使用自定义镜像创建实例.md#)。

在创建ECS实例前，您需要完成以下工作：

-   注册阿里云账号，并完成实名认证。

-   如果要购买按量付费实例，账户余额不能少于100元人民币。关于充值，请参见 财务文档 [如何充值付款](https://help.aliyun.com/document_detail/37107.html?spm=a2c4g.11186623.2.5.CscUFl)。

-   如果要创建专有网络（VPC）ECS实例，需要在目标地域 [创建一个专有网络和交换机](https://help.aliyun.com/document_detail/65430.html?spm=a2c4g.11186623.2.6.CscUFl)。

-   如果不使用系统自动创建的默认安全组，需要在目标地域 [创建一个安全组](https://help.aliyun.com/document_detail/25468.html?spm=a2c4g.11186623.2.7.CscUFl) 并 [添加能满足您业务需求的安全组规则](https://help.aliyun.com/document_detail/25471.html?spm=a2c4g.11186623.2.8.CscUFl)。默认安全组规则的详细信息，请参见 [默认安全组规则](https://help.aliyun.com/document_detail/31707.html?spm=a2c4g.11186623.2.9.CscUFl)。

-   如果创建Linux实例时需要绑定SSH密钥对，需要在目标地域 [创建一个SSH密钥对](https://help.aliyun.com/document_detail/51793.html?spm=a2c4g.11186623.2.10.CscUFl)。

-   如果要设置自定义数据，需要准备 [实例自定义数据](https://help.aliyun.com/document_detail/49121.html?spm=a2c4g.11186623.2.11.CscUFl)。

-   如果要让实例扮演某个角色，需要 [创建实例RAM角色，并授予角色相应的权限](https://help.aliyun.com/document_detail/61175.html?spm=a2c4g.11186623.2.12.CscUFl)。

-   如果您是企业用户，可以 [申请资源管理服务的公测资格](https://i.aliyun.com/inviteapply?spm=a2c4g.11186623.2.13.CscUFl&agent_id=188)。


1.   登录 [云服务器ECS管理控制台](https://ecs.console.aliyun.com/#/home)。 
2.   在左侧导航栏里，单击 **实例**。 
3.   在 实例列表 页面上，单击 **创建实例**，进入 创建 页面。 
4.   完成 基础配置： 
    1.   选择 **付费方式**：**包年包月**、**按量付费** 或者 [竞价实例](../../../../cn.zh-CN/产品简介/实例/竞价实例.md#)。 

        **说明：** 

        -   如果要创建按周付费的实例，必须选择 **包年包月**，并将页面底部的 **购买周期** 设置为 **1周**。不同付费方式的区别，请参见 [创建竞价实例](../../../../cn.zh-CN/用户指南/实例/创建实例/创建竞价实例.md#)。
        -   如果要创建竞价实例，请参见 [创建竞价实例](../../../../cn.zh-CN/用户指南/实例/创建实例/创建竞价实例.md#)。
    2.   选择地域和可用区。系统默认随机分配可用区，您可以选择适用的可用区。如何选择地域和可用区，请参见 [地域和可用区](https://help.aliyun.com/document_detail/40654.html?spm=a2c4g.11186623.2.18.FNU0Ug)。 

        **说明：** 

        -   实例创建完成后，不可更改地域和可用区。
        -   部分实例规格族并不是全地域提供。详细信息，请参见 [创建GPU计算型实例](../../../../cn.zh-CN/用户指南/实例/创建实例/创建GPU计算型实例.md#)、[创建f1实例](../../../../cn.zh-CN/用户指南/实例/创建实例/创建f1实例.md#)、[创建f2实例](../../../../cn.zh-CN/用户指南/实例/创建实例/创建f2实例.md#)、[创建超级计算集群 SCC 实例](../../../../cn.zh-CN/用户指南/实例/创建实例/创建超级计算集群 SCC 实例.md#) 和 [创建弹性裸金属服务器](../../../../cn.zh-CN/用户指南/实例/创建实例/创建弹性裸金属服务器.md#)。
    3.   选择实例规格并设置实例数量：可供选择的实例规格由您所选择的地域决定。不同实例规格适用的应用场景，请参见 [实例规格族](../../../../cn.zh-CN/产品简介/实例规格族.md#)。 

        **说明：** 

        -   每个账号有限定的按量付费实例或竞价实例配额。以页面上显示的信息为准。
        -   如果您要创建竞价实例，必须在这一步骤里设置单台实例规格的价格上限。
        -   如果您使用弹性网卡，企业级实例规格族必须选择不少于2 vCPU核的实例规格，入门级实例规格族必须选择不少于4 vCPU核的实例规格。各种实例规格支持的弹性网卡数量，请参见 [实例规格族](../../../../cn.zh-CN/产品简介/实例规格族.md#)。
        -   如果您要使用SSD云盘作为存储设备，请选择I/O优化实例。
    4.   选择镜像。您可以选择公共镜像、自定义镜像、共享镜像或从镜像市场选择镜像。 

        **说明：** 

        -   如果您要使用SSH密钥对，必须选择Linux系统。
        -   如果您要设置实例自定义数据，只能选择特定的镜像，详细信息请参见 [实例自定义数据](../../../../cn.zh-CN/用户指南/实例/实例自定义/元数据/实例自定义数据.md#)。
    5.   选择存储： 
        -   **系统盘**：必选项，用于安装操作系统。指定系统盘的云盘类型和容量：

            -   云盘类型：地域不同会影响可供选择的云盘类型。
            -   容量：系统盘默认容量为40 GiB，最大为500 GiB。如果选择的镜像文件大于40 GiB，则默认为镜像文件大小。系统盘的容量范围由镜像决定，如下表所示。

                |镜像|系统盘容量范围|
                |:-|:------|
                |Linux（不包括CoreOS）FreeBSD|\[max\{20, 镜像文件大小\}, 500\] GiB其中，公共镜像中，Ubuntu 14.04 32位、Ubuntu 16.04 32位和CentOS 6.8 32位的镜像文件容量为40 GiB|
                |CoreOS|\[max\{30, 镜像文件大小\}, 500\] GiB|
                |Windows|\[max\{40, 镜像文件大小\}, 500\] GiB|

        -   **数据盘**：可选项。如果在此时创建云盘作为数据盘，必须选择云盘类型、容量、数量，并设置是否 [加密](../../../../cn.zh-CN/产品简介/块存储/ECS 磁盘加密.md#)。您可以创建空云盘，也可以使用快照创建云盘。最多可以添加16块云盘作数据盘。

            **说明：** 

            此时创建的云盘有以下特点：

            -   计费方式与实例相同。
            -   包年包月数据盘只能随实例一起释放，按量付费的数据盘可以设置为随实例一起释放。
        -   如果您选择的是带本地盘的实例规格族（比如i1、d1、d1ne等），这里会显示实例规格对应的本地盘信息，不可配置。各种本地盘实例规格对应的本地盘信息，请参见 [实例规格族](../../../../cn.zh-CN/产品简介/实例规格族.md#)。

5.   单击 **下一步：网络和安全组**，完成网络和安全组设置： 
    1.   选择网络类型： 
        -   **专有网络**：必须选择专有网络和交换机。如果您没有创建专有网络和交换机，可以选择默认专有网络和默认交换机。
        -   **经典网络**：如果您是在2017年6月14日17:00（UTC+8）以后第一次购买ECS实例，不能再选择经典网络。
    2.   设置公网带宽： 
        -   如果需要为实例分配一个公网IP地址，必须选中 **分配公网IP地址**，选择 **按使用流量** 或 **按固定带宽** 计费公网带宽，并指定带宽。通过这种方式分配的公网IP地址不能与实例解绑。关于如何选择公网带宽计费方式，请参见 [公网带宽计费](../../../../cn.zh-CN/产品定价/公网带宽计费.md#) 。
        -   如果您的实例不需要访问公网或者您的VPC类型ECS实例 [使用弹性公网IP（EIP）地址访问公网](../../../../cn.zh-CN/快速入门/搭建专有网络.md#)，您不需要分配公网IP地址。EIP地址随时能与实例解绑。
    3.   选择安全组。如果您自己没有创建安全组，可以使用默认安全组。默认安全组的规则，请参见 [安全组默认规则](../../../../cn.zh-CN/用户指南/安全组/安全组默认规则.md#)。 
    4.   添加弹性网卡。如果所选实例规格支持弹性网卡，可以添加弹性网卡，并为网卡选择交换机。 

        **说明：** 这里添加的弹性网卡默认会随实例一起释放，您可以 [在ECS控制台](../../../../cn.zh-CN/用户指南/弹性网卡/将弹性网卡从实例上分离.md#) 或者使用 [DetachNetworkInterface](../../../../cn.zh-CN/API参考/弹性网卡/DetachNetworkInterface.md#) 接口分离实例和网卡。

6.   （可选）单击 **下一步：系统配置**，完成系统配置项： 
    -   选择并设置登录凭证。您可以选择 [创建后设置](../../../../cn.zh-CN/用户指南/实例/重置实例密码.md#)，也可以当前直接设置。根据镜像选择不同的登录凭证：

        -   Linux系统：可以选择使用密钥对或密码作为登录凭证。
        -   Windows系统：只能使用密码作为登录凭证。
    -   设置实例名称以及显示在操作系统内部的计算机名。

    -   设置高级选项：

        -   实例RAM角色：为实例授予一个RAM角色。
        -   实例自定义数据：自定义实例启动行为或向实例传入数据。
7.   （可选）单击 **下一步：分组设置**，完成实例分组管理：如果您有多台实例，为了方便管理，建议您为实例添加标签；如果您是企业用户，已经开通了资源管理服务，而且已经创建了资源组，可以按资源组管理实例。 
8.   确认订单： 
    -   在 **所选配置** 部分，确认配置信息。您可以单击 ![](http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/pic/25424/cn_zh/1521471446632/Create_Edit.png) 编辑图标重新编辑配置。
    -   （可选）如果计费方式为 **按量付费**，可以 **设置自动释放服务时间**。
    -   （可选）如果计费方式为 **包年包月**，可以设置购买时长，并选择是否开启 **自动续费**。
    -   确认配置费用。实例和公网带宽的计费方式决定了显示的费用信息，如下表所示。

        |实例计费方式|公网带宽计费方式|费用估算|
        |:-----|:-------|:---|
        |按量付费或竞价实例|按使用流量|公网流量费用 + 配置费用。其中，配置费用包括：实例规格（CPU 和内存的配置）、系统盘、数据盘（如果有）和本地盘（如果有）的费用。|
        |按固定带宽|配置费用，包括：实例规格（CPU和内存的配置）、系统盘、数据盘（如果有）、本地盘（如果有）和公网带宽的费用。|
        |包年包月|按固定带宽|配置费用，包括：实例规格（CPU和内存的配置）、系统盘、数据盘（如果有）、本地盘（如果有）和公网带宽的费用。|
        |按使用流量|公网流量费用 + 配置费用。其中，配置费用包括：实例规格（CPU和内存的配置）、系统盘、数据盘（如果有）和本地盘（如果有）的费用。|

        |实例计费方式|费用估算|
        |:-----|:---|
        |按量付费|公网流量费用 + 配置费用。其中，配置费用包括：实例规格（CPU 和内存的配置）、系统盘、数据盘（如果有）和本地盘（如果有）的费用。|
        |包年包月|公网流量费用 + 配置费用。其中，配置费用包括：实例规格（CPU和内存的配置）、系统盘、数据盘（如果有）和本地盘（如果有）的费用。|

    -   阅读并确认 **云服务器ECS服务条款**。
9.   单击 **创建实例**。 

实例开通后，单击 **管理控制台** 回到ECS管理控制台查看新建的ECS实例。在相应地域的 **实例列表** 里，您能查看新建实例的实例名称、公网IP地址、内网IP地址或私网IP等信息。

-   您可以通过FTP服务上传本地文件到ECS实例。关于部署FTP服务的详细操作，请参见 [使用ECS实例创建FTP站点](https://help.aliyun.com/document_detail/51998.html)。
-   创建实例后，建议您对操作系统做安全合规性检查和加固：
    -   Linux实例，请参见 安全公告和技术 手册中的 [Linux操作系统加固](https://help.aliyun.com/document_detail/49809.html)。
    -   Windows实例，请参见 安全公告和技术 手册中的 [Windows操作系统安全加固](https://help.aliyun.com/document_detail/49781.html)。
-   如果您随实例创建了数据盘，只有分区格式化后您才能正常使用数据盘，具体操作，请参见 [Linux 格式化和挂载数据盘](cn.zh-CN/个人版快速入门/步骤 4：格式化数据盘/Linux 格式化和挂载数据盘.md#) 或 [Windows 格式化数据盘](cn.zh-CN/个人版快速入门/步骤 4：格式化数据盘/Windows 格式化数据盘.md#)。

